import{G as v,r as o,o as x,j as e,af as N,L as R}from"./index-r2m0KAVL.js";import{p as G,m as M,a as C}from"./markdown-BXXtQo5o.js";const j="https://gracechords.com",T=`${j}/favicon.ico`;function _(){const{slug:r}=v(),[i,f]=o.useState(""),[s,S]=o.useState({}),a=o.useMemo(()=>(x?.items||[]).find(t=>t.slug===r),[r]),[p,w]=o.useState("");o.useEffect(()=>{let t=!1;return(async()=>{try{const n="./".replace(/\/+$/,"")+"/",c=await fetch(`${n}resources/${r}.md`);if(!c.ok)throw new Error(`${c.status} ${c.statusText}`);const u=await c.text();if(t)return;const g=G(u);f(g.content||""),S({...g.meta})}catch(n){w(String(n?.message||n))}})(),()=>{t=!0}},[r]);const $=o.useMemo(()=>M(i),[i]),h=o.useMemo(()=>{const t=new Set(s.tags||a?.tags||[]);return(x?.items||[]).filter(c=>c.slug!==r&&c.tags?.some(u=>t.has(u))).slice(0,3)},[r,s,a]),l=s.title||a?.title||r,m=o.useMemo(()=>{const t=s.summary||a?.summary;if(t)return t;const n=C(i);return n.length>220?`${n.slice(0,220).trim()}…`:n||"GraceChords resource article."},[s,a,i]),d=`${j}/?resource=${encodeURIComponent(r||"")}`;return e.jsxs("div",{className:"container",children:[e.jsxs(N,{children:[e.jsx("title",{children:l?`${l} | GraceChords Resources`:"GraceChords Resources"}),e.jsx("meta",{name:"description",content:m}),e.jsx("meta",{property:"og:type",content:"article"}),e.jsx("meta",{property:"og:title",content:l||"GraceChords Resources"}),e.jsx("meta",{property:"og:description",content:m}),e.jsx("meta",{property:"og:url",content:d}),e.jsx("meta",{property:"og:site_name",content:"GraceChords"}),e.jsx("meta",{property:"og:image",content:T}),e.jsx("link",{rel:"canonical",href:d}),s.tags?.length?e.jsx("meta",{name:"keywords",content:s.tags.join(", ")}):null,e.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Article",headline:l,description:m,author:s.author||a?.author||"GraceChords",datePublished:s.date||a?.date,dateModified:s.date||a?.date,url:d})})]}),p?e.jsx("div",{className:"alert error",children:p}):null,e.jsxs("article",{className:"card",style:{padding:12},children:[e.jsx("h1",{style:{margin:"4px 0"},children:l}),e.jsxs("div",{className:"Small",style:{opacity:.8},children:["by ",s.author||a?.author||"—"," • ",y(s.date||a?.date)]}),Array.isArray(s.tags)&&s.tags.length?e.jsx("div",{className:"Small",style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:6},children:s.tags.map(t=>e.jsx("span",{className:"gc-tag gc-tag--gray",children:t},t))}):null,e.jsx("div",{className:"PostBody",style:{marginTop:12},dangerouslySetInnerHTML:{__html:$}})]}),h.length?e.jsxs("div",{style:{marginTop:12},children:[e.jsx("h3",{children:"Related"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:12},children:h.map(t=>e.jsxs("article",{className:"card",style:{padding:12},children:[e.jsx("h4",{style:{margin:"4px 0"},children:e.jsx(R,{to:`/resources/${t.slug}`,children:t.title})}),e.jsxs("div",{className:"Small",style:{opacity:.8},children:["by ",t.author," • ",y(t.date)]}),t.summary?e.jsx("p",{style:{margin:"6px 0 0 0"},children:t.summary}):null]},t.slug))})]}):null]})}function y(r){try{return new Date(r).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch{return r}}export{_ as default};
