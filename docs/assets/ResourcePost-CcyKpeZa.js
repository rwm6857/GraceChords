import{u as j,r as l,j as s,e as S}from"./index-C5RwKqO1.js";import{r as g,p as v,m as w}from"./markdown-DhTLSAy7.js";function $(){const{slug:t}=j(),[o,p]=l.useState(""),[a,x]=l.useState({}),n=l.useMemo(()=>(g?.items||[]).find(e=>e.slug===t),[t]),[m,y]=l.useState("");l.useEffect(()=>{let e=!1;return(async()=>{try{const c="./".replace(/\/+$/,"")+"/",r=await fetch(`${c}resources/${t}.md`);if(!r.ok)throw new Error(`${r.status} ${r.statusText}`);const i=await r.text();if(e)return;const u=v(i);p(u.content||""),x({...u.meta})}catch(c){y(String(c?.message||c))}})(),()=>{e=!0}},[t]);const f=l.useMemo(()=>w(o),[o]),d=l.useMemo(()=>{const e=new Set(a.tags||n?.tags||[]);return(g?.items||[]).filter(r=>r.slug!==t&&r.tags?.some(i=>e.has(i))).slice(0,3)},[t,a,n]);return s.jsxs("div",{className:"container",children:[m?s.jsx("div",{className:"alert error",children:m}):null,s.jsxs("article",{className:"card",style:{padding:12},children:[s.jsx("h1",{style:{margin:"4px 0"},children:a.title||n?.title||t}),s.jsxs("div",{className:"Small",style:{opacity:.8},children:["by ",a.author||n?.author||"—"," • ",h(a.date||n?.date)]}),Array.isArray(a.tags)&&a.tags.length?s.jsx("div",{className:"Small",style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:6},children:a.tags.map(e=>s.jsx("span",{className:"gc-tag gc-tag--gray",children:e},e))}):null,s.jsx("div",{className:"PostBody",style:{marginTop:12},dangerouslySetInnerHTML:{__html:f}})]}),d.length?s.jsxs("div",{style:{marginTop:12},children:[s.jsx("h3",{children:"Related"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:12},children:d.map(e=>s.jsxs("article",{className:"card",style:{padding:12},children:[s.jsx("h4",{style:{margin:"4px 0"},children:s.jsx(S,{to:`/resources/${e.slug}`,children:e.title})}),s.jsxs("div",{className:"Small",style:{opacity:.8},children:["by ",e.author," • ",h(e.date)]}),e.summary?s.jsx("p",{style:{margin:"6px 0 0 0"},children:e.summary}):null]},e.slug))})]}):null]})}function h(t){try{return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch{return t}}export{$ as default};
