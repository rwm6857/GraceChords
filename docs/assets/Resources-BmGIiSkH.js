import{r as l,F as y,j as s,e as f}from"./index-BXyuQjQq.js";import{r as j,s as v}from"./markdown-DhTLSAy7.js";function k(){const t=l.useMemo(()=>(j?.items||[]).slice().sort((e,a)=>(a.date||"").localeCompare(e.date||"")),[]),i=l.useMemo(()=>{const e=new Set;for(const a of t)(a.tags||[]).forEach(c=>e.add(String(c)));return Array.from(e).sort((a,c)=>a.localeCompare(c))},[t]),[r,g]=l.useState(""),[n,d]=l.useState(""),m=l.useMemo(()=>new y(t,{keys:["title","summary"],threshold:.35}),[t]),[o,p]=l.useState({});l.useEffect(()=>{!r||Object.keys(o).length||(async()=>{const e={};for(const a of t)try{const c="./".replace(/\/+$/,"")+"/",x=(await(await fetch(`${c}resources/${a.slug}.md`)).text()).replace(/^---[\s\S]*?---\n?/,"");e[a.slug]=v(x)}catch{}p(e)})()},[r,t,o]);const h=l.useMemo(()=>{let e=r?m.search(r).map(a=>a.item):t;if(r&&e.length===0&&Object.keys(o).length){const a=r.toLowerCase();e=t.filter(c=>(o[c.slug]||"").toLowerCase().includes(a))}return n&&(e=e.filter(a=>(a.tags||[]).includes(n))),e},[r,n,m,t,o]);return s.jsxs("div",{className:"HomePage",children:[s.jsxs("div",{className:"HomeHeader",children:[s.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:s.jsx("h1",{children:"Resources"})}),s.jsxs("div",{className:"card",style:{display:"grid",gap:10},children:[s.jsx("input",{placeholder:"Search resources...",value:r,onChange:e=>g(e.target.value),"aria-label":"Search resources",style:{minWidth:0,fontSize:16}}),s.jsx("div",{className:"row",style:{gap:8,alignItems:"center"},children:s.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[s.jsx(u,{label:"All",active:!n,onClick:()=>d("")}),i.map(e=>s.jsx(u,{label:e,active:n===e,onClick:()=>d(e)},e))]})})]})]}),s.jsx("div",{className:"HomeResults",role:"region","aria-label":"Resource results",children:s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:12,marginTop:12},children:h.map(e=>s.jsxs("article",{className:"card",style:{padding:12,display:"flex",flexDirection:"column",gap:8},children:[s.jsx("h3",{style:{margin:"4px 0"},children:s.jsx(f,{to:`/resources/${e.slug}`,children:e.title})}),s.jsxs("div",{className:"Small",style:{opacity:.8},children:["by ",e.author," â€¢ ",b(e.date)]}),e.tags?.length?s.jsx("div",{className:"Small",style:{display:"flex",gap:6,flexWrap:"wrap"},children:e.tags.map(a=>s.jsx("span",{className:"gc-tag gc-tag--gray",children:a},a))}):null,e.summary?s.jsx("p",{style:{margin:"4px 0 0 0"},children:e.summary}):null]},e.slug))})})]})}function u({label:t,active:i,onClick:r}){return s.jsx("button",{className:`gc-tag ${i?"gc-tag--blue":"gc-tag--gray"}`,onClick:r,children:t})}function b(t){try{return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch{return t}}export{k as default};
