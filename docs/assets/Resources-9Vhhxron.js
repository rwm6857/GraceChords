import{r as l,F as h,j as a,e as y}from"./index-B4FNR4VO.js";import{r as j,s as v}from"./markdown-DhTLSAy7.js";function M(){const t=l.useMemo(()=>(j?.items||[]).slice().sort((e,s)=>(s.date||"").localeCompare(e.date||"")),[]),i=l.useMemo(()=>{const e=new Set;for(const s of t)(s.tags||[]).forEach(n=>e.add(String(n)));return Array.from(e).sort((s,n)=>s.localeCompare(n))},[t]),[r,g]=l.useState(""),[c,u]=l.useState(""),m=l.useMemo(()=>new h(t,{keys:["title","summary"],threshold:.35}),[t]),[o,d]=l.useState({});l.useEffect(()=>{!r||Object.keys(o).length||(async()=>{const e={};for(const s of t)try{const n="./".replace(/\/+$/,"")+"/",f=(await(await fetch(`${n}resources/${s.slug}.md`)).text()).replace(/^---[\s\S]*?---\n?/,"");e[s.slug]=v(f)}catch{}d(e)})()},[r,t,o]);const x=l.useMemo(()=>{let e=r?m.search(r).map(s=>s.item):t;if(r&&e.length===0&&Object.keys(o).length){const s=r.toLowerCase();e=t.filter(n=>(o[n.slug]||"").toLowerCase().includes(s))}return c&&(e=e.filter(s=>(s.tags||[]).includes(c))),e},[r,c,m,t,o]);return a.jsxs("div",{className:"container",children:[a.jsx("h1",{children:"Resources"}),a.jsxs("div",{style:{marginTop:10,display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[a.jsx("input",{placeholder:"Search resources...",value:r,onChange:e=>g(e.target.value),style:{flex:"1 1 320px"}}),a.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[a.jsx(p,{label:"All",active:!c,onClick:()=>u("")}),i.map(e=>a.jsx(p,{label:e,active:c===e,onClick:()=>u(e)},e))]})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:12,marginTop:12},children:x.map(e=>a.jsxs("article",{className:"card",style:{padding:12,display:"flex",flexDirection:"column",gap:8},children:[a.jsx("h3",{style:{margin:"4px 0"},children:a.jsx(y,{to:`/resources/${e.slug}`,children:e.title})}),a.jsxs("div",{className:"Small",style:{opacity:.8},children:["by ",e.author," â€¢ ",w(e.date)]}),e.tags?.length?a.jsx("div",{className:"Small",style:{display:"flex",gap:6,flexWrap:"wrap"},children:e.tags.map(s=>a.jsx("span",{className:"gc-tag gc-tag--gray",children:s},s))}):null,e.summary?a.jsx("p",{style:{margin:"4px 0 0 0"},children:e.summary}):null]},e.slug))})]})}function p({label:t,active:i,onClick:r}){return a.jsx("button",{className:`gc-tag ${i?"gc-tag--blue":"gc-tag--gray"}`,onClick:r,children:t})}function w(t){try{return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch{return t}}export{M as default};
