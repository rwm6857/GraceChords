function u(s=""){const e=/^---\n([\s\S]*?)\n---\n?([\s\S]*)$/m.exec(s);if(!e)return{meta:{},content:s};const n=e[1],a=e[2],r={};for(const l of n.split(/\r?\n/)){const t=/^([^:]+):\s*(.*)$/.exec(l);if(!t)continue;const o=t[1].trim().toLowerCase();let c=t[2].trim();if(/^\[.*\]$/.test(c))try{c=JSON.parse(c)}catch{}else(/^".*"$/.test(c)||/^'.*'$/.test(c))&&(c=c.replace(/^['"]|['"]$/g,""));r[o]=c}return{meta:r,content:a}}function $(s=""){return String(s||"").normalize("NFKD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function d(s=""){let e=String(s||"");return e=e.replace(/^:{2,3}youtube[^\n]*$/gim," "),e=e.replace(/`{3}[\s\S]*?`{3}/g," "),e=e.replace(/`[^`]*`/g," "),e=e.replace(/!\[[^\]]*\]\([^)]*\)/g," "),e=e.replace(/\[[^\]]*\]\([^)]*\)/g," "),e=e.replace(/^>\s?/gm,""),e=e.replace(/^#{1,6}\s*/gm,""),e=e.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1"),e=e.replace(/\s+/g," ").trim(),e}function g(s=""){const e=String(s||"").trim();if(!e)return"";const n=/^[A-Za-z0-9_-]{6,24}$/;if(n.test(e))return e.slice(0,24);try{const r=new URL(e),l=r.searchParams.get("v")||r.searchParams.get("vi");if(l&&n.test(l))return l.slice(0,24);const t=r.pathname.split("/").filter(Boolean);if(r.hostname.includes("youtu.be")&&t[0]&&n.test(t[0]))return t[0].slice(0,24);const o=["embed","shorts","v","video"],c=t.findIndex(p=>o.includes(p));if(c>=0&&t[c+1]&&n.test(t[c+1]))return t[c+1].slice(0,24);const i=t[t.length-1];if(i&&n.test(i))return i.slice(0,24)}catch{}const a=/(?:v=|youtu\.be\/|embed\/)([A-Za-z0-9_-]{6,24})/i.exec(e);return a?a[1].slice(0,24):""}function f(s=""){let e=String(s||"");e=e.replace(/<iframe[\s\S]*?<\/iframe>/gi,"");const n=[];return e=e.replace(/^\s*:{2,3}youtube\s*(\{[^}]*\})?\s*$/gim,(a,r="")=>{const l=/id\s*=\s*["']?([^"'\s}]+)["']?/i.exec(r)||/url\s*=\s*["']?([^"'\s}]+)["']?/i.exec(r),t=g(l?l[1]:"");return t?(n.push(t),`@@GCYOUTUBE-${n.length-1}@@`):""}),e=e.replace(/^######\s?(.*)$/gm,"<h6>$1</h6>"),e=e.replace(/^#####\s?(.*)$/gm,"<h5>$1</h5>"),e=e.replace(/^####\s?(.*)$/gm,"<h4>$1</h4>"),e=e.replace(/^###\s?(.*)$/gm,"<h3>$1</h3>"),e=e.replace(/^##\s?(.*)$/gm,"<h2>$1</h2>"),e=e.replace(/^#\s?(.*)$/gm,"<h1>$1</h1>"),e=e.replace(/^>\s?(.*)$/gm,"<blockquote>$1</blockquote>"),e=e.replace(/^\s{0,3}(?:([-*_])( ?\1){2,})\s*$/gm,"<hr />"),e=e.replace(/^(?:- |\* )(.*)$/gm,"<li>$1</li>"),e=e.replace(/(<li>[^<]*<\/li>\s*)+/g,a=>`<ul>${a.replace(/\s*$/,"")}</ul>`),e=e.replace(/```([\s\S]*?)```/g,(a,r)=>`<pre><code>${m(r)}</code></pre>`),e=e.replace(/`([^`]+)`/g,(a,r)=>`<code>${m(r)}</code>`),e=e.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img alt="$1" src="$2" />'),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'),e=e.replace(/\*\*\*([^\*]+)\*\*\*/g,"<strong><em>$1</em></strong>"),e=e.replace(/___([^_]+)___/g,"<strong><em>$1</em></strong>"),e=e.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),e=e.replace(/__([^_]+)__/g,"<strong>$1</strong>"),e=e.replace(/\*([^*]+)\*/g,"<em>$1</em>"),e=e.replace(/_([^_]+)_/g,"<em>$1</em>"),e=e.replace(/@@GCYOUTUBE-(\d+)@@/g,(a,r)=>{const l=n[Number(r)];return l?`<div class="gc-embed gc-embed--youtube"><div class="gc-embed__ratio"><iframe src="https://www.youtube.com/embed/${m(l)}" title="YouTube video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></div></div>`:""}),e=e.split(/\n{2,}/).map(a=>{const r=a.trim();return r?/^\s*<(h\d|ul|ol|li|pre|blockquote|img|iframe|p|table|hr|div)/i.test(r)?r:`<p>${r.replace(/\n/g,"<br/>")}</p>`:""}).join(`
`),e}function m(s=""){return String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}export{d as a,g as e,f as m,u as p,$ as s};
